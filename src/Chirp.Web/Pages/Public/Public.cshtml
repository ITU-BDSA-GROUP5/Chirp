@page "/"
@model Chirp.Web.Pages.PublicModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
	ViewData["Title"] = "Chirp!";
	Layout = "Shared/_Layout";
}

<div>
	<h2> Public Timeline </h2>

	@if (User.Identity?.IsAuthenticated == true)
	{
		<div class="cheepbox">
			<h3>What's on your mind @(User.Identity.Name)?</h3>
			@if (Model.EmptyCheep)
			{
				<p>Your cheep is empty :(</p>
			}
			<form method="post">
				<input style="float: left" type="text" asp-for="CheepMessage">
				<input type="submit" value="Share">
			</form>
		</div>
	}

	@if (Model.Cheeps.Any())
	{
		<ul id="messagelist" class="cheeps">
			@foreach (var cheep in Model.Cheeps)
			{
				<li>
					<p class="wrap">
						<strong>
							<a href="/@cheep.AuthorName">@cheep.AuthorName</a>
						</strong>
						@cheep.Message
						<small>&mdash; @cheep.TimeStamp</small>
					</p>
				</li>
			}
		</ul>
	}
	else
	{
		<em>There are no cheeps so far.</em>
	}
	@if (Model.PageNumber == 1)
	{
		<div>
			Previous @Model.PageNumber
			<a href=@(Model.PageUrl + "?Page=" + (Model.PageNumber + 1))>Next</a>
		</div>
	}
	@if (Model.PageNumber > 1 && Model.PageNumber < Model.LastPageNumber)
	{
		<div>
			<a href=@(Model.PageUrl + "?Page=" + (Model.PageNumber - 1))>Previous</a>
			@Model.PageNumber
			<a href=@(Model.PageUrl + "?Page=" + (Model.PageNumber + 1))>Next</a>
		</div>
	}
	@if (Model.PageNumber == Model.LastPageNumber)
	{
		<div>
			<a href=@(Model.PageUrl + "?Page=" + (Model.PageNumber - 1))>Previous</a>
			@Model.PageNumber
			Next
		</div>
	}
</div>
